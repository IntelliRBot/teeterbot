<?xml version="1.0"?>
<launch>

  <arg name="voltage_mode" default="false" />
  <arg name="torque_mode" default="false" />
  <arg name="speed_mode" default="false" />

  <!-- Start up Gazebo -->
  <include file="$(find gazebo_ros)/launch/empty_world.launch" />

  <!-- Spawn Teeterbot with specific settings -->
  <include file="$(find teeterbot_gazebo)/launch/teeterbot_robot.launch" >
    <!-- Name and spawn pose -->
    <arg name="robot_name" value="teeterbot" />
    <arg name="start_x" value="0.0" />
    <arg name="start_y" value="0.0" />
    <arg name="start_z" value="0.2" />
    <arg name="start_yaw" value="0.0" />

    <!-- Physical properties -->
    <arg name="body_length" value="0.8" />
    <arg name="body_width" value="0.3" />
    <arg name="body_depth" value="0.3" />
    <arg name="body_mass" value="10.0" />
    <arg name="wheel_mass" value="1.0" />
    <arg name="wheel_radius" value="0.2" />
    <arg name="training_wheels" value="false" />

    <!-- Simulation behavior settings -->
    <arg name="pub_ground_truth" value="false" />
    <arg name="auto_reset_orientation" value="true" />
    <arg name="auto_reset_delay" value="2.0" />

    <!-- Control mode (set only one) -->
    <arg name="voltage_mode" value="$(arg voltage_mode)" />
    <arg name="torque_mode" value="$(arg torque_mode)" />
    <arg name="speed_mode" value="$(arg speed_mode)" />
  </include>

  <param name="/gazebo/left_speed_control/ramp_limit" value="20.0" />
  <param name="/gazebo/left_speed_control/kp" value="3.0" />
  <param name="/gazebo/left_speed_control/ki" value="2.0" />
  <param name="/gazebo/left_speed_control/kd" value="0.0" />
  <param name="/gazebo/right_speed_control/ramp_limit" value="20.0" />
  <param name="/gazebo/right_speed_control/kp" value="3.0" />
  <param name="/gazebo/right_speed_control/ki" value="2.0" />
  <param name="/gazebo/right_speed_control/kd" value="0.0" />

  <param name="/gazebo/left_torque_control/ramp_limit" value="1000.0" />
  <param name="/gazebo/left_torque_control/kp" value="10.0" />
  <param name="/gazebo/left_torque_control/ki" value="2.0" />
  <param name="/gazebo/left_torque_control/kd" value="0.0" />
  <param name="/gazebo/right_torque_control/ramp_limit" value="1000.0" />
  <param name="/gazebo/right_torque_control/kp" value="10.0" />
  <param name="/gazebo/right_torque_control/ki" value="2.0" />
  <param name="/gazebo/right_torque_control/kd" value="0.0" />

</launch>
